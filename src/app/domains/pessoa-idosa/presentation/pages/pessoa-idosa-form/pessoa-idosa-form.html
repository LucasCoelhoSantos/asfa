<app-main-menu></app-main-menu>

<div class="container-fluid py-4">
  <div class="row justify-content-center">
    <div class="col-12 col-lg-10 col-xl-8">
      <form *ngIf="form" [formGroup]="form" (ngSubmit)="aoSalvar()">
        <div class="card shadow-sm">
          <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center">
            <h2 class="h5 mb-0 fw-semibold">
              {{ isEditMode ? 'Editar Cadastro' : 'Novo Cadastro de Pessoa Idosa' }}
            </h2>
            <button type="button" class="btn btn-sm btn-light" (click)="voltar()">
              <i class="bi bi-arrow-left"></i> Voltar
            </button>
          </div>

          <div class="card-body p-4">
            <fieldset class="mb-4">
              <legend class="h6 border-bottom pb-2 mb-3">Dados Pessoais</legend>
              <div class="row g-3">
                <div class="col-12">
                  <label for="nome" class="form-label">Nome Completo *</label>
                  <input type="text" id="nome" class="form-control" formControlName="nome" [class.is-invalid]="form.get('nome')?.invalid && form.get('nome')?.touched">
                </div>
                <div class="col-md-6">
                  <label for="dataNascimento" class="form-label">Data de Nascimento *</label>
                  <input type="date" id="dataNascimento" class="form-control" formControlName="dataNascimento" [class.is-invalid]="form.get('dataNascimento')?.invalid && form.get('dataNascimento')?.touched">
                </div>
                <div class="col-md-6">
                  <label for="estadoCivil" class="form-label">Estado Civil *</label>
                  <input type="text" id="estadoCivil" class="form-control" formControlName="estadoCivil" [class.is-invalid]="form.get('estadoCivil')?.invalid && form.get('estadoCivil')?.touched">
                </div>
                <div class="col-md-4">
                  <label for="cpf" class="form-label">CPF *</label>
                  <input type="text" id="cpf" class="form-control" formControlName="cpf" [class.is-invalid]="form.get('cpf')?.invalid && form.get('cpf')?.touched">
                </div>
                <div class="col-md-4">
                  <label for="rg" class="form-label">RG *</label>
                  <input type="text" id="rg" class="form-control" formControlName="rg" [class.is-invalid]="form.get('rg')?.invalid && form.get('rg')?.touched">
                </div>
                <div class="col-md-4">
                  <label for="orgaoEmissor" class="form-label">Órgão Emissor *</label>
                  <input type="text" id="orgaoEmissor" class="form-control" formControlName="orgaoEmissor" [class.is-invalid]="form.get('orgaoEmissor')?.invalid && form.get('orgaoEmissor')?.touched">
                </div>
                <div class="col-md-6">
                  <label for="naturalidade" class="form-label">Naturalidade</label>
                  <input type="text" id="naturalidade" class="form-control" formControlName="naturalidade">
                </div>
                <div class="col-md-6">
                  <label for="religiao" class="form-label">Religião</label>
                  <input type="text" id="religiao" class="form-control" formControlName="religiao">
                </div>
              </div>
            </fieldset>

            <fieldset class="mb-4">
              <legend class="h6 border-bottom pb-2 mb-3">Contato</legend>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="telefone" class="form-label">Telefone *</label>
                  <input type="text" id="telefone" class="form-control" formControlName="telefone" [class.is-invalid]="form.get('telefone')?.invalid && form.get('telefone')?.touched">
                </div>
                <div class="col-md-6">
                  <label for="email" class="form-label">E-mail</label>
                  <input type="email" id="email" class="form-control" formControlName="email" [class.is-invalid]="form.get('email')?.invalid && form.get('email')?.touched">
                </div>
              </div>
            </fieldset>

            <fieldset class="mb-4" formGroupName="endereco">
              <legend class="h6 border-bottom pb-2 mb-3">Endereço *</legend>
              <app-endereco-form></app-endereco-form>
            </fieldset>

            <fieldset>
              <legend class="h6 border-bottom pb-2 mb-3">Informações Adicionais</legend>
              <div class="row g-3">
                 <div class="col-12">
                   <label for="prontuarioSaude" class="form-label">Prontuário de Saúde</label>
                   <textarea id="prontuarioSaude" class="form-control" formControlName="prontuarioSaude" rows="3"></textarea>
                 </div>
                 <div class="col-md-6">
                   <label for="beneficio" class="form-label">Benefício</label>
                   <input type="text" id="beneficio" class="form-control" formControlName="beneficio">
                 </div>
                 <div class="col-md-6 d-flex align-items-center pt-3">
                    <div class="form-check form-switch">
                      <input class="form-check-input" type="checkbox" role="switch" id="aposentadoConsegueSeManterComSuaRenda" formControlName="aposentadoConsegueSeManterComSuaRenda">
                      <label class="form-check-label" for="aposentadoConsegueSeManterComSuaRenda">Consegue se manter com a renda?</label>
                    </div>
                 </div>
                 <div class="col-12">
                   <label for="comoComplementa" class="form-label">Como complementa a renda?</label>
                   <input type="text" id="comoComplementa" class="form-control" formControlName="comoComplementa">
                 </div>
                 <div class="col-12">
                   <label for="historicoFamiliarSocial" class="form-label">Histórico Familiar e Social</label>
                   <textarea id="historicoFamiliarSocial" class="form-control" formControlName="historicoFamiliarSocial" rows="3"></textarea>
                 </div>
                 <div class="col-12">
                   <label for="observacao" class="form-label">Observações</label>
                   <textarea id="observacao" class="form-control" formControlName="observacao" rows="3"></textarea>
                 </div>
              </div>
            </fieldset>

          </div>

          <div class="card-footer d-flex justify-content-end gap-2">
            <button type="button" class="btn btn-secondary" (click)="voltar()">
              <i class="bi bi-x-circle me-1"></i> Cancelar
            </button>
            <button type="submit" class="btn btn-primary" [disabled]="form.invalid">
              <i class="bi bi-check-circle me-1"></i> Salvar
            </button>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>